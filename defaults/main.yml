---

#########################################################
## Hashicorp Vault Ansible role defaults               ##
#########################################################

vault:
  metadata:
    name: "vault"
    description: "Hashicorp Vault Ansible role."
    version: "1.0.0"
    maintainer: ""
    maintainer_email: ""
  # application contains the configuration for the application server.
  application:
    # validate_certs configures if the certificate of the application server should be validated. example: true or false. 
    validate_certs: false
  # container contains the configuration for the container used to run Hashicorp Vault.
  container:  
    # name is the name of the container used in podman or docker. example: "vault".
    name: "vault"
    # platform is the platform used for the container. example: "podman", "kubernetes", "docker" or "autodetect".
    platform: "podman"
    # uninstall indicates if the container should be uninstalled. example: true or false. Default is false.
    uninstall: false
    # repository_url can be a URL to a docker image or a tar file. example: "https://docker.io/sonatype/nexus3" or "/tmp/nexus3.67.1.tar", "https://192.168.1.1/repo/nexus.tar".
    repository_url: "docker.io/hashicorp/vault"
    # repository_tag is a tag of the image or a version of the tar file. example: "3.67.1" or "latest" Default is "latest".
    # repository_tag: "latest"
    # repository_checksum can be a checksum of the container file. example: "sha256:1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef" or "1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef".
    # repository_checksum: ""
    # repository_checksum_algorithm can be a checksum algorithm of the container file. example: "sha256", sha512", "md5".
    # repository_checksum_algorithm: "sha256"
    # ports is a list of ports used in the container. example: ["8200:8200"] or ["8200:8200", "8201:8201"].
    ports:
      - "8200:8200"
    # container_volumes is a list of volumes used in the container. example: ["vault/config:/vault/config:Z"] or ["vault/config:/vault/config:Z", "vault/file:/vault/file:Z"].
    volumes: 
      - "vault/logs:/vault/logs:Z"
      - "vault/file:/vault/file:Z"
      - "vault/config:/vault/config:Z"
    # container_env is a list of environment variables used in the container.
    environment:
      SKIP_SETCAP: true
  # secrets contains the configuration for the vault used for storing secrets and configuration data.
  secrets:
    # secret_name is the unique id of the vault used for storing secrets and configuration data. default is {{ansible_fqdn }}.
    secret_name: "{{ ansible_fqdn | replace('.', '-') }}"
    # secret_engine_name is the name of the vault used for storing secrets and configuration data. example: "nexus-repository".
    secret_engine_name: "hashicorp-vault"
    # <container_name>_secret_engine_description is the description of the vault used for storing secrets and configuration data. example: "Secrets for Sonatype Nexus Repository.".
    secret_engine_description: "Secrets for Hashicorp Vault."
